<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0f0f12">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Pulse - Feel the Rhythm</title>
  
  <!-- PWA Manifest (inline reference for demo) -->
  <link rel="manifest" href="data:application/json,{&quot;name&quot;:&quot;Pulse&quot;,&quot;short_name&quot;:&quot;Pulse&quot;,&quot;start_url&quot;:&quot;.&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;background_color&quot;:&quot;%230f0f12&quot;,&quot;theme_color&quot;:&quot;%230f0f12&quot;}">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --bg: #0f0f12;
      --bg-card: #1a1a21;
      --bg-elevated: #22222b;
      --fg: #f5f5f7;
      --fg-muted: #8e8e93;
      --accent: #ff2d55;
      --accent-glow: rgba(255, 45, 85, 0.4);
      --success: #32d74b;
      --border: #2c2c36;
      --radius: 20px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--fg);
      overflow-x: hidden;
      min-height: 100vh;
      min-height: 100dvh;
    }

    h1, h2, h3, h4 {
      font-family: 'Space Grotesk', sans-serif;
    }

    /* Ambient Background */
    .ambient-bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      overflow: hidden;
      pointer-events: none;
    }

    .pulse-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.4;
      animation: drift 20s ease-in-out infinite;
    }

    .orb-1 {
      width: 300px;
      height: 300px;
      background: var(--accent);
      top: -100px;
      right: -50px;
      animation-delay: 0s;
    }

    .orb-2 {
      width: 200px;
      height: 200px;
      background: #5856d6;
      bottom: 20%;
      left: -50px;
      animation-delay: -7s;
    }

    @keyframes drift {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(30px, 30px) scale(1.1); }
    }

    /* App Shell */
    .app-shell {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      min-height: 100dvh;
      display: flex;
      flex-direction: column;
    }

    /* Status Bar */
    .status-bar {
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      font-weight: 500;
      position: sticky;
      top: 0;
      background: rgba(15, 15, 18, 0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: 100;
      border-bottom: 1px solid transparent;
      transition: border-color 0.3s;
    }

    .status-bar.scrolled {
      border-bottom-color: var(--border);
    }

    .connection-status {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 99px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.02em;
      transition: all 0.3s ease;
    }

    .connection-status.online {
      background: rgba(50, 215, 75, 0.15);
      color: var(--success);
    }

    .connection-status.offline {
      background: rgba(255, 45, 85, 0.15);
      color: var(--accent);
    }

    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
      animation: blink 2s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    /* Hero Section */
    .hero {
      padding: 40px 24px 60px;
      text-align: center;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .logo-container {
      position: relative;
      width: 80px;
      height: 80px;
      margin: 0 auto 32px;
    }

    .logo-ring {
      position: absolute;
      inset: 0;
      border: 2px solid var(--accent);
      border-radius: 50%;
      opacity: 0;
      animation: ripple 2s ease-out infinite;
    }

    .logo-ring:nth-child(2) { animation-delay: 0.5s; }
    .logo-ring:nth-child(3) { animation-delay: 1s; }

    @keyframes ripple {
      0% { transform: scale(1); opacity: 0.6; }
      100% { transform: scale(1.8); opacity: 0; }
    }

    .logo-core {
      position: absolute;
      inset: 10px;
      background: linear-gradient(135deg, var(--accent) 0%, #ff6b8a 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 40px var(--accent-glow);
    }

    .hero-title {
      font-size: clamp(2.5rem, 12vw, 4rem);
      font-weight: 700;
      line-height: 1;
      margin-bottom: 16px;
      letter-spacing: -0.03em;
    }

    .hero-subtitle {
      font-size: 1rem;
      color: var(--fg-muted);
      max-width: 300px;
      margin: 0 auto 40px;
      line-height: 1.5;
    }

    /* Action Buttons */
    .cta-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-width: 280px;
      margin: 0 auto;
    }

    .btn {
      padding: 16px 32px;
      border-radius: 14px;
      font-weight: 600;
      font-size: 15px;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      position: relative;
      overflow: hidden;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
      box-shadow: 0 10px 30px var(--accent-glow);
    }

    .btn-primary:active {
      transform: scale(0.96);
    }

    .btn-secondary {
      background: var(--bg-card);
      color: var(--fg);
      border: 1px solid var(--border);
    }

    .btn-secondary:active {
      background: var(--bg-elevated);
      transform: scale(0.96);
    }

    /* Ripple Effect */
    .ripple-effect {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      transform: scale(0);
      animation: ripple-click 0.6s ease-out;
      pointer-events: none;
    }

    @keyframes ripple-click {
      to { transform: scale(4); opacity: 0; }
    }

    /* Features Accordion */
    .features-section {
      padding: 40px 24px;
      background: var(--bg-card);
      border-radius: 32px 32px 0 0;
      margin-top: -32px;
      position: relative;
    }

    .section-label {
      font-size: 12px;
      color: var(--accent);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 16px;
    }

    .feature-item {
      background: var(--bg-elevated);
      border-radius: 16px;
      margin-bottom: 12px;
      overflow: hidden;
      border: 1px solid var(--border);
      transition: border-color 0.3s;
    }

    .feature-item.active {
      border-color: var(--accent);
    }

    .feature-header {
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .feature-header:active {
      background: rgba(255, 255, 255, 0.03);
    }

    .feature-icon {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .feature-title {
      flex: 1;
      font-weight: 600;
      font-size: 15px;
    }

    .feature-toggle {
      width: 24px;
      height: 24px;
      color: var(--fg-muted);
      transition: transform 0.3s ease;
    }

    .feature-item.active .feature-toggle {
      transform: rotate(180deg);
    }

    .feature-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.3s;
    }

    .feature-item.active .feature-content {
      max-height: 200px;
    }

    .feature-body {
      padding: 0 20px 20px;
      color: var(--fg-muted);
      font-size: 14px;
      line-height: 1.6;
    }

    /* Sync Demo */
    .sync-demo {
      padding: 40px 24px;
    }

    .sync-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 24px;
      padding: 24px;
    }

    .sync-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .sync-title {
      font-weight: 600;
    }

    .sync-toggle {
      display: flex;
      gap: 8px;
    }

    .toggle-btn {
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--fg-muted);
      cursor: pointer;
      transition: all 0.2s;
    }

    .toggle-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    /* Task List */
    .task-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .task-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--bg);
      border-radius: 14px;
      transition: all 0.3s ease;
    }

    .task-item.syncing {
      opacity: 0.6;
    }

    .task-checkbox {
      width: 24px;
      height: 24px;
      border-radius: 8px;
      border: 2px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .task-checkbox.checked {
      background: var(--success);
      border-color: var(--success);
    }

    .task-checkbox svg {
      width: 14px;
      height: 14px;
      color: white;
      opacity: 0;
      transform: scale(0.5);
      transition: all 0.2s ease;
    }

    .task-checkbox.checked svg {
      opacity: 1;
      transform: scale(1);
    }

    .task-text {
      flex: 1;
      font-size: 14px;
      transition: all 0.3s;
    }

    .task-item.completed .task-text {
      text-decoration: line-through;
      color: var(--fg-muted);
    }

    .task-status {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .task-status svg {
      width: 16px;
      height: 16px;
    }

    .task-status.synced svg {
      color: var(--success);
    }

    .task-status.pending svg {
      color: var(--accent);
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--bg-elevated);
      border: 1px solid var(--border);
      padding: 14px 24px;
      border-radius: 14px;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .toast-icon {
      width: 20px;
      height: 20px;
    }

    /* Install Prompt */
    .install-banner {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-elevated);
      border-top: 1px solid var(--border);
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      z-index: 99;
      transform: translateY(100%);
      transition: transform 0.4s ease;
    }

    .install-banner.show {
      transform: translateY(0);
    }

    .install-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .install-icon {
      width: 44px;
      height: 44px;
      background: linear-gradient(135deg, var(--accent) 0%, #ff6b8a 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .install-text h4 {
      font-size: 14px;
      font-weight: 600;
    }

    .install-text p {
      font-size: 12px;
      color: var(--fg-muted);
    }

    .install-btn {
      padding: 10px 20px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
    }

    .install-close {
      background: none;
      border: none;
      color: var(--fg-muted);
      cursor: pointer;
      padding: 4px;
    }

    /* Large Screen Adjustments */
    @media (min-width: 768px) {
      .hero {
        padding: 80px 24px;
      }
      
      .cta-group {
        flex-direction: row;
        max-width: none;
        justify-content: center;
      }

      .features-section {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
        border-radius: 32px;
        max-width: 900px;
        margin: -32px auto 0;
      }

      .feature-item {
        margin-bottom: 0;
      }

      .feature-header {
        flex-direction: column;
        text-align: center;
      }

      .feature-toggle {
        display: none;
      }

      .feature-content {
        max-height: none;
      }

      .feature-body {
        padding: 0 0 0;
        text-align: center;
      }
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Focus States */
    *:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <!-- Ambient Background -->
  <div class="ambient-bg" aria-hidden="true">
    <div class="pulse-orb orb-1"></div>
    <div class="pulse-orb orb-2"></div>
  </div>

  <!-- App Shell -->
  <div class="app-shell">
    <!-- Status Bar -->
    <header class="status-bar" role="banner">
      <span id="currentTime">9:41</span>
      <div class="connection-status online" id="connectionStatus" role="status" aria-live="polite">
        <span class="status-dot"></span>
        <span>Online</span>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero">
      <div class="logo-container" aria-hidden="true">
        <div class="logo-ring"></div>
        <div class="logo-ring"></div>
        <div class="logo-ring"></div>
        <div class="logo-core">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
          </svg>
        </div>
      </div>

      <h1 class="hero-title">Pulse</h1>
      <p class="hero-subtitle">Your life, in rhythm. Works anywhere, syncs everywhere.</p>

      <div class="cta-group">
        <button class="btn btn-primary" id="startBtn">
          Get Started
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </button>
        <button class="btn btn-secondary" id="demoBtn">
          Try Demo
        </button>
      </div>
    </section>

    <!-- Features -->
    <section class="features-section" aria-labelledby="features-label">
      <div>
        <span class="section-label" id="features-label">Features</span>
        <h2 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 24px;">Built for motion</h2>
      </div>

      <article class="feature-item active" data-feature="offline">
        <div class="feature-header" role="button" tabindex="0" aria-expanded="true">
          <div class="feature-icon" style="background: rgba(255, 45, 85, 0.15);">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#ff2d55" stroke-width="2">
              <path d="M5 12.55a11 11 0 0 1 14.08 0"/>
              <path d="M1.42 9a16 16 0 0 1 21.16 0"/>
              <path d="M8.53 16.11a6 6 0 0 1 6.95 0"/>
              <circle cx="12" cy="20" r="1"/>
            </svg>
          </div>
          <span class="feature-title">Offline First</span>
          <svg class="feature-toggle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m6 9 6 6 6-6"/>
          </svg>
        </div>
        <div class="feature-content">
          <div class="feature-body">
            No connection? No problem. Pulse caches everything locally and syncs automatically when you're back online.
          </div>
        </div>
      </article>

      <article class="feature-item" data-feature="sync">
        <div class="feature-header" role="button" tabindex="0" aria-expanded="false">
          <div class="feature-icon" style="background: rgba(88, 86, 214, 0.15);">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#5856d6" stroke-width="2">
              <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
            </svg>
          </div>
          <span class="feature-title">Instant Sync</span>
          <svg class="feature-toggle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m6 9 6 6 6-6"/>
          </svg>
        </div>
        <div class="feature-content">
          <div class="feature-body">
            Changes propagate across devices in milliseconds. Conflict resolution happens automagically.
          </div>
        </div>
      </article>

      <article class="feature-item" data-feature="micro">
        <div class="feature-header" role="button" tabindex="0" aria-expanded="false">
          <div class="feature-icon" style="background: rgba(50, 215, 75, 0.15);">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#32d74b" stroke-width="2">
              <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
            </svg>
          </div>
          <span class="feature-title">Micro Moments</span>
          <svg class="feature-toggle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m6 9 6 6 6-6"/>
          </svg>
        </div>
        <div class="feature-content">
          <div class="feature-body">
            Delightful haptic feedback and animations make every interaction feel alive and responsive.
          </div>
        </div>
      </article>
    </section>

    <!-- Sync Demo -->
    <section class="sync-demo" aria-labelledby="sync-demo-title">
      <div class="sync-card">
        <div class="sync-header">
          <h3 class="sync-title" id="sync-demo-title">Live Sync Demo</h3>
          <div class="sync-toggle" role="group" aria-label="Connection status toggle">
            <button class="toggle-btn active" data-status="online">Online</button>
            <button class="toggle-btn" data-status="offline">Offline</button>
          </div>
        </div>
        <div class="task-list" role="list">
          <!-- Rendered by JS -->
        </div>
      </div>
    </section>

    <div style="height: 100px;"></div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" role="alert" aria-live="assertive">
    <svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="#32d74b" stroke-width="2">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
      <path d="M22 4L12 14.01l-3-3"/>
    </svg>
    <span id="toastMessage">Action completed</span>
  </div>

  <!-- Install Banner -->
  <div class="install-banner" id="installBanner" role="dialog" aria-label="Install app">
    <div class="install-info">
      <div class="install-icon">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
          <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
        </svg>
      </div>
      <div class="install-text">
        <h4>Install Pulse</h4>
        <p>Add to home screen</p>
      </div>
    </div>
    <button class="install-btn" id="installAccept">Install</button>
    <button class="install-close" id="installClose" aria-label="Close">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M18 6L6 18M6 6l12 12"/>
      </svg>
    </button>
  </div>

  <script>
    // ==================== STATE ====================
    let isOnline = true;
    let deferredPrompt = null;

    const tasks = [
      { id: 1, text: 'Review quarterly report', completed: true, synced: true },
      { id: 2, text: 'Schedule team sync', completed: false, synced: true },
      { id: 3, text: 'Update project timeline', completed: false, synced: true },
    ];

    // ==================== DOM ELEMENTS ====================
    const connectionStatus = document.getElementById('connectionStatus');
    const currentTimeEl = document.getElementById('currentTime');
    const taskList = document.querySelector('.task-list');
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toastMessage');
    const installBanner = document.getElementById('installBanner');
    const statusBar = document.querySelector('.status-bar');

    // ==================== TIME UPDATE ====================
    function updateTime() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes().toString().padStart(2, '0');
      currentTimeEl.textContent = `${hours}:${minutes}`;
    }
    updateTime();
    setInterval(updateTime, 1000);

    // ==================== RIPPLE EFFECT ====================
    function createRipple(event, element) {
      const rect = element.getBoundingClientRect();
      const ripple = document.createElement('span');
      ripple.className = 'ripple-effect';
      
      const size = Math.max(rect.width, rect.height);
      ripple.style.width = ripple.style.height = size + 'px';
      ripple.style.left = (event.clientX - rect.left - size / 2) + 'px';
      ripple.style.top = (event.clientY - rect.top - size / 2) + 'px';
      
      element.appendChild(ripple);
      
      setTimeout(() => ripple.remove(), 600);
    }

    document.querySelectorAll('.btn').forEach(btn => {
      btn.addEventListener('click', (e) => createRipple(e, btn));
    });

    // ==================== TOAST ====================
    function showToast(message) {
      toastMessage.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ==================== CONNECTION STATUS ====================
    function updateConnectionStatus(online) {
      isOnline = online;
      const statusText = connectionStatus.querySelector('span:last-child');
      
      if (online) {
        connectionStatus.classList.remove('offline');
        connectionStatus.classList.add('online');
        statusText.textContent = 'Online';
        
        // Simulate sync
        const pendingTasks = tasks.filter(t => !t.synced);
        if (pendingTasks.length > 0) {
          showToast(`Syncing ${pendingTasks.length} pending item(s)...`);
          setTimeout(() => {
            tasks.forEach(t => t.synced = true);
            renderTasks();
            showToast('All changes synced');
          }, 1500);
        }
      } else {
        connectionStatus.classList.remove('online');
        connectionStatus.classList.add('offline');
        statusText.textContent = 'Offline';
      }
      
      // Update toggle buttons
      document.querySelectorAll('.toggle-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.status === (online ? 'online' : 'offline'));
      });
    }

    // ==================== RENDER TASKS ====================
    function renderTasks() {
      taskList.innerHTML = tasks.map(task => `
        <div class="task-item ${task.completed ? 'completed' : ''}" data-id="${task.id}" role="listitem">
          <div class="task-checkbox ${task.completed ? 'checked' : ''}" role="checkbox" aria-checked="${task.completed}" tabindex="0">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <path d="M20 6L9 17l-5-5"/>
            </svg>
          </div>
          <span class="task-text">${task.text}</span>
          <div class="task-status ${task.synced ? 'synced' : 'pending'}">
            ${task.synced 
              ? '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M22 4L12 14.01l-3-3"/></svg>'
              : '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>'
            }
          </div>
        </div>
      `).join('');

      // Add click handlers
      document.querySelectorAll('.task-checkbox').forEach(checkbox => {
        checkbox.addEventListener('click', handleTaskToggle);
        checkbox.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            handleTaskToggle(e);
          }
        });
      });
    }

    function handleTaskToggle(e) {
      const taskItem = e.target.closest('.task-item');
      const taskId = parseInt(taskItem.dataset.id);
      const task = tasks.find(t => t.id === taskId);
      
      if (task) {
        task.completed = !task.completed;
        task.synced = isOnline;
        
        renderTasks();
        
        if (!isOnline) {
          showToast('Saved locally - will sync when online');
        } else {
          showToast('Task updated');
        }
      }
    }

    // ==================== FEATURE ACCORDION ====================
    document.querySelectorAll('.feature-header').forEach(header => {
      header.addEventListener('click', () => {
        const item = header.closest('.feature-item');
        const isActive = item.classList.contains('active');
        
        // Close all (for mobile accordion behavior)
        if (window.innerWidth < 768) {
          document.querySelectorAll('.feature-item').forEach(i => i.classList.remove('active'));
        }
        
        if (!isActive || window.innerWidth >= 768) {
          item.classList.toggle('active');
        }
        
        header.setAttribute('aria-expanded', item.classList.contains('active'));
      });

      header.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          header.click();
        }
      });
    });

    // ==================== STATUS TOGGLE ====================
    document.querySelectorAll('.toggle-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        updateConnectionStatus(btn.dataset.status === 'online');
      });
    });

    // ==================== NATIVE NETWORK STATUS ====================
    window.addEventListener('online', () => updateConnectionStatus(true));
    window.addEventListener('offline', () => updateConnectionStatus(false));

    // ==================== SCROLL EFFECT ====================
    window.addEventListener('scroll', () => {
      statusBar.classList.toggle('scrolled', window.scrollY > 10);
    });

    // ==================== BUTTON ACTIONS ====================
    document.getElementById('startBtn').addEventListener('click', () => {
      showToast('Welcome to Pulse!');
    });

    document.getElementById('demoBtn').addEventListener('click', () => {
      document.querySelector('.sync-demo').scrollIntoView({ behavior: 'smooth' });
    });

    // ==================== PWA INSTALL PROMPT ====================
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBanner.classList.add('show');
    });

    document.getElementById('installAccept').addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === 'accepted') {
          showToast('Pulse installed successfully!');
        }
        deferredPrompt = null;
        installBanner.classList.remove('show');
      } else {
        showToast('Add to home screen from browser menu');
        installBanner.classList.remove('show');
      }
    });

    document.getElementById('installClose').addEventListener('click', () => {
      installBanner.classList.remove('show');
    });

    // ==================== INIT ====================
    renderTasks();
    updateConnectionStatus(navigator.onLine);
    
    // Show install banner after delay (demo purposes)
    setTimeout(() => {
      if (!deferredPrompt) {
        // For demo, show anyway
        installBanner.classList.add('show');
      }
    }, 3000);
  </script>
</body>
</html>